# ğŸ” Telegram ç™»å½•æµç¨‹è®¾è®¡

**ç‰ˆæœ¬**: v1.0  
**è®¾è®¡æ—¥æœŸ**: 2025-11-17  
**åŸºäº**: Telegram Web QR Code Login Best Practices 2025

---

## ğŸ“Š ç™»å½•æµç¨‹æ¦‚è¿°

### æ–¹æ¡ˆé€‰æ‹©ï¼šQR ç æ‰«æç™»å½•

æ ¹æ® 2025 å¹´ Telegram Web æœ€ä½³å®è·µï¼Œæˆ‘ä»¬é‡‡ç”¨ **QR ç æ‰«æç™»å½•**æ–¹å¼ï¼š

**ä¼˜åŠ¿**ï¼š
- âœ… **æœ€å¿«é€Ÿ**ï¼š2-3 ç§’å®Œæˆç™»å½•
- âœ… **æœ€å®‰å…¨**ï¼šä½¿ç”¨åŠ å¯†äº‘ä¼šè¯ï¼Œæ— éœ€è¾“å…¥æ‰‹æœºå·
- âœ… **ç”¨æˆ·å‹å¥½**ï¼šç§»åŠ¨ç«¯ç”¨æˆ·ç†Ÿæ‚‰çš„äº¤äº’æ–¹å¼
- âœ… **æ— éœ€éªŒè¯ç **ï¼šé¿å… SMS å»¶è¿Ÿå’Œè¾“å…¥é”™è¯¯
- âœ… **è·¨è®¾å¤‡æ— ç¼**ï¼šæ‰‹æœºå’Œæ¡Œé¢è‡ªç„¶è¿æ¥

---

## ğŸ¨ ç™»å½•äº¤äº’æµç¨‹

### æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·ç‚¹å‡»    â”‚
â”‚ "ğŸ”‘ ç™»å½•"   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. å¯åŠ¨ Playwright  â”‚
â”‚    æµè§ˆå™¨å®ä¾‹       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. æ‰“å¼€ Telegram    â”‚
â”‚    Web (web.telegram)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. æ£€æµ‹ç™»å½•çŠ¶æ€     â”‚
â”‚    - å·²ç™»å½•ï¼Ÿ       â”‚
â”‚    - éœ€è¦ç™»å½•ï¼Ÿ     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€ å·²æœ‰ Session â”€â”€â”
       â”‚                  â”‚
       â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4a. æ˜¾ç¤º    â”‚    â”‚ 4b. æ˜¾ç¤º     â”‚
â”‚    QR ç     â”‚    â”‚    ä¸»ç•Œé¢    â”‚
â”‚             â”‚    â”‚              â”‚
â”‚ [QR Image]  â”‚    â”‚ âœ… ç™»å½•æˆåŠŸ  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. ç”¨æˆ·æ‰«æ QR ç    â”‚
â”‚    (Telegram App)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. éªŒè¯å¹¶ç™»å½•       â”‚
â”‚    - åŠ å¯†ä¼šè¯å»ºç«‹   â”‚
â”‚    - ä¿å­˜ Session   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. æ›´æ–°çŠ¶æ€         â”‚
â”‚    âœ… åœ¨çº¿          â”‚
â”‚    ğŸ”” åŒæ­¥æœªè¯»æ•°    â”‚
â”‚    ğŸ’¬ åŠ è½½èŠå¤©åˆ—è¡¨  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ UI/UX è®¾è®¡

### 1. **è´¦å·å¡ç‰‡çŠ¶æ€æŒ‡ç¤ºå™¨**

#### çŠ¶æ€ 1: æœªç™»å½•
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¡ test_account                      â”‚
â”‚ âš ï¸ æœªç™»å½•  ğŸ’¬ 2  ğŸ”– 4               â”‚
â”‚                                       â”‚
â”‚ ğŸ“‚ æ•°æ®: ./browser_data/test_accountâ”‚
â”‚                                       â”‚
â”‚         ğŸ”‘ ç™»å½•    â¹ åœæ­¢    âœï¸ ç¼–è¾‘â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### çŠ¶æ€ 2: ç™»å½•ä¸­ï¼ˆæ˜¾ç¤º QR ç ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¡ test_account                      â”‚
â”‚ âš ï¸ ç­‰å¾…æ‰«ç   ğŸ’¬ 2  ğŸ”– 4             â”‚
â”‚                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚ â”‚ [QR CODE]  â”‚  è¯·ä½¿ç”¨ Telegram App â”‚
â”‚ â”‚            â”‚  æ‰«æäºŒç»´ç ç™»å½•      â”‚
â”‚ â”‚            â”‚                       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â±ï¸ æœ‰æ•ˆæœŸ: 2åˆ†é’Ÿ   â”‚
â”‚                                       â”‚
â”‚         âŒ å–æ¶ˆç™»å½•                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### çŠ¶æ€ 3: åœ¨çº¿è¿è¡Œä¸­
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ test_account                      â”‚
â”‚ ğŸŸ¢ åœ¨çº¿  ğŸ”” 5  ğŸ’¬ 2  ğŸ”– 4           â”‚
â”‚                                       â”‚
â”‚ ğŸ“‚ æ•°æ®: ./browser_data/test_accountâ”‚
â”‚ ğŸ’¬ ç›‘æ§: Saved Messages â€¢ Support   â”‚
â”‚                                       â”‚
â”‚         â–¶ï¸ å¯åŠ¨    â¹ åœæ­¢    âœï¸ ç¼–è¾‘â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### çŠ¶æ€ 4: ç¦»çº¿
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš« test_account                      â”‚
â”‚ ğŸ’¬ 2  ğŸ”– 4                           â”‚
â”‚                                       â”‚
â”‚ ğŸ“‚ æ•°æ®: ./browser_data/test_accountâ”‚
â”‚                                       â”‚
â”‚         â–¶ï¸ å¯åŠ¨    â¹ åœæ­¢    âœï¸ ç¼–è¾‘â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’» å®ç°ç»†èŠ‚

### å‰ç«¯çŠ¶æ€ç®¡ç†

```typescript
interface AccountStatus {
  online: boolean          // åœ¨çº¿çŠ¶æ€
  unreadCount: number      // æœªè¯»æ¶ˆæ¯æ•°
  chatCount: number        // ç›‘æ§çš„èŠå¤©æ•°é‡
  needsLogin: boolean      // æ˜¯å¦éœ€è¦ç™»å½•
  qrCode?: string          // QR ç æ•°æ®ï¼ˆBase64 æˆ– URLï¼‰
}
```

### çŠ¶æ€æŒ‡ç¤ºå™¨é¢œè‰²

| çŠ¶æ€ | é¢œè‰² | åŠ¨ç”» | å›¾æ ‡ |
|------|------|------|------|
| **åœ¨çº¿** | ğŸŸ¢ ç»¿è‰² | è„‰å†²åŠ¨ç”» | animate-pulse |
| **éœ€è¦ç™»å½•** | ğŸŸ¡ é»„è‰² | è„‰å†²åŠ¨ç”» | animate-pulse |
| **ç¦»çº¿** | âš« ç°è‰² | æ—  | - |
| **é”™è¯¯** | ğŸ”´ çº¢è‰² | é—ªçƒ | animate-bounce |

---

## ğŸ”„ å®æ—¶çŠ¶æ€åŒæ­¥

### åç«¯ â†’ å‰ç«¯çŠ¶æ€æ¨é€

é€šè¿‡ IPC äº‹ä»¶æ¨é€çŠ¶æ€æ›´æ–°ï¼š

```typescript
// åç«¯ç›‘å¬ Telegram Web çŠ¶æ€
playwright.on('page-update', (status) => {
  mainWindow.webContents.send('account-status-changed', {
    account: accountName,
    online: true,
    unreadCount: getUnreadCount(),
    chatCount: getMonitoredChats().length,
    needsLogin: false
  })
})
```

### å‰ç«¯ç›‘å¬çŠ¶æ€å˜åŒ–

```typescript
useEffect(() => {
  const cleanup = window.electron.onAccountStatusChanged((status) => {
    setAccountStatus(prev => ({
      ...prev,
      [status.account]: {
        online: status.online,
        unreadCount: status.unreadCount,
        chatCount: status.chatCount,
        needsLogin: status.needsLogin,
        qrCode: status.qrCode
      }
    }))
  })
  return cleanup
}, [])
```

---

## ğŸ“± QR ç ç™»å½•å®ç°

### åç«¯ - Playwright é›†æˆ

```python
from playwright.async_api import async_playwright

async def login_with_qr(account_name: str):
    async with async_playwright() as p:
        browser = await p.chromium.launch(headless=False)
        page = await browser.new_page()
        
        # æ‰“å¼€ Telegram Web
        await page.goto('https://web.telegram.org/k/')
        
        # ç­‰å¾… QR ç å‡ºç°
        qr_selector = 'canvas.qr-canvas'
        await page.wait_for_selector(qr_selector, timeout=10000)
        
        # æˆªå– QR ç å›¾ç‰‡
        qr_element = await page.query_selector(qr_selector)
        qr_screenshot = await qr_element.screenshot()
        qr_base64 = base64.b64encode(qr_screenshot).decode()
        
        # æ¨é€ QR ç åˆ°å‰ç«¯
        send_ipc_event('qr-code-ready', {
            'account': account_name,
            'qrCode': f'data:image/png;base64,{qr_base64}'
        })
        
        # ç­‰å¾…ç™»å½•æˆåŠŸï¼ˆURL å˜åŒ–æˆ–å…ƒç´ å‡ºç°ï¼‰
        await page.wait_for_url('https://web.telegram.org/k/#*', timeout=120000)
        
        # ç™»å½•æˆåŠŸ
        send_ipc_event('login-success', {
            'account': account_name
        })
```

---

## ğŸª åŠ¨ç”»ä¸è¿‡æ¸¡æ•ˆæœ

### çŠ¶æ€åˆ‡æ¢åŠ¨ç”»

```css
/* çŠ¶æ€æŒ‡ç¤ºç¯è¿‡æ¸¡ */
.status-indicator {
  transition: all 0.3s ease-in-out;
}

/* åœ¨çº¿çŠ¶æ€ - è„‰å†²åŠ¨ç”» */
.status-online {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* æœªè¯»æ•°å­— - å¼¹è·³æç¤º */
.unread-badge {
  animation: bounce 1s ease-in-out;
}

/* QR ç æ·¡å…¥ */
.qr-code {
  animation: fadeIn 0.5s ease-in;
}
```

---

## ğŸ”’ å®‰å…¨è€ƒè™‘

### Session ç®¡ç†

1. **æœ¬åœ°å­˜å‚¨**
   - Session æ•°æ®å­˜å‚¨åœ¨ `browser_data/{account_name}/` ç›®å½•
   - ä½¿ç”¨ Playwright çš„æŒä¹…åŒ–ä¸Šä¸‹æ–‡
   - è‡ªåŠ¨åŠ å¯†å­˜å‚¨ï¼ˆChromium å†…ç½®ï¼‰

2. **è‡ªåŠ¨ç™»å½•**
   - ä¸‹æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½ Session
   - æ— éœ€é‡æ–°æ‰«ç ï¼ˆé™¤é Session è¿‡æœŸï¼‰

3. **å¤šè´¦å·éš”ç¦»**
   - æ¯ä¸ªè´¦å·ç‹¬ç«‹çš„æµè§ˆå™¨æ•°æ®ç›®å½•
   - å®Œå…¨éš”ç¦»çš„ Cookie å’Œ Storage

---

## ğŸ“Š çŠ¶æ€ç›‘æ§æŒ‡æ ‡

### å®æ—¶æ˜¾ç¤ºçš„æ•°æ®

| æŒ‡æ ‡ | æ¥æº | æ›´æ–°é¢‘ç‡ | æ˜¾ç¤ºä½ç½® |
|------|------|----------|----------|
| **åœ¨çº¿çŠ¶æ€** | Playwright è¿æ¥çŠ¶æ€ | å®æ—¶ | çŠ¶æ€æŒ‡ç¤ºç¯ |
| **æœªè¯»æ¶ˆæ¯æ•°** | Telegram API | æ¯ 2-3 ç§’ | æœªè¯»å¾½ç«  |
| **ç›‘æ§èŠå¤©æ•°** | é…ç½®æ–‡ä»¶ + å®æ—¶éªŒè¯ | å®æ—¶ | èŠå¤©æ•°å¾½ç«  |
| **ä»Šæ—¥æ¶ˆæ¯æ•°** | æœ¬åœ°è®¡æ•°å™¨ | å®æ—¶ | ç»Ÿè®¡å¡ç‰‡ |
| **ä»Šæ—¥å›å¤æ•°** | æœ¬åœ°è®¡æ•°å™¨ | å®æ—¶ | ç»Ÿè®¡å¡ç‰‡ |

---

## ğŸš€ ä¼˜åŒ–å»ºè®®

### æ€§èƒ½ä¼˜åŒ–

1. **å»¶è¿ŸåŠ è½½ QR ç **
   - åªåœ¨ç”¨æˆ·ç‚¹å‡»"ç™»å½•"æ—¶ç”Ÿæˆ QR ç 
   - é¿å…ä¸å¿…è¦çš„æµè§ˆå™¨å¯åŠ¨

2. **çŠ¶æ€ç¼“å­˜**
   - ç¼“å­˜è´¦å·åœ¨çº¿çŠ¶æ€ï¼Œå‡å°‘æŸ¥è¯¢é¢‘ç‡
   - ä½¿ç”¨å¿ƒè·³æœºåˆ¶æ£€æµ‹è¿æ¥çŠ¶æ€

3. **æ‡’åŠ è½½è´¦å·**
   - åªåŠ è½½å¯è§è´¦å·çš„è¯¦ç»†ä¿¡æ¯
   - æŠ˜å çš„è´¦å·æš‚åœçŠ¶æ€æ›´æ–°

### ç”¨æˆ·ä½“éªŒä¼˜åŒ–

1. **ç™»å½•è¶…æ—¶æç¤º**
   - QR ç  2 åˆ†é’Ÿåè‡ªåŠ¨åˆ·æ–°
   - æ˜¾ç¤ºå€’è®¡æ—¶æç¤º

2. **ç™»å½•å¤±è´¥å¤„ç†**
   - ç½‘ç»œé”™è¯¯ï¼šæ˜¾ç¤ºé‡è¯•æŒ‰é’®
   - è¶…æ—¶ï¼šè‡ªåŠ¨åˆ·æ–° QR ç 
   - Session è¿‡æœŸï¼šæ¸…é™¤æ—§ Sessionï¼Œé‡æ–°ç™»å½•

3. **çŠ¶æ€é¢„åŠ è½½**
   - å¯åŠ¨æ—¶é¢„æ£€æŸ¥æ‰€æœ‰è´¦å·çš„ Session çŠ¶æ€
   - æ˜¾ç¤º"æ£€æŸ¥ä¸­"çŠ¶æ€

---

## ğŸ“ å¾…å®ç°åŠŸèƒ½

### Phase 1 - MVP âœ…
- [x] åŸºç¡€çŠ¶æ€æ˜¾ç¤ºï¼ˆåœ¨çº¿/ç¦»çº¿ï¼‰
- [x] æœªè¯»æ•°å®æ—¶æ›´æ–°
- [x] ç™»å½•æŒ‰é’®åŠ¨æ€åˆ‡æ¢
- [x] æ—¥å¿—çŠ¶æ€è§£æ

### Phase 2 - å¢å¼º
- [ ] QR ç æ˜¾ç¤º UI
- [ ] QR ç è‡ªåŠ¨åˆ·æ–°
- [ ] ç™»å½•å€’è®¡æ—¶
- [ ] Session çŠ¶æ€é¢„æ£€

### Phase 3 - é«˜çº§
- [ ] å¤šè´¦å·æ‰¹é‡ç™»å½•
- [ ] ç™»å½•å†å²è®°å½•
- [ ] è‡ªåŠ¨é‡è¿æœºåˆ¶
- [ ] çŠ¶æ€å›¾è¡¨ç»Ÿè®¡

---

## ğŸ¯ æµ‹è¯•åœºæ™¯

### æµ‹è¯•ç”¨ä¾‹

| åœºæ™¯ | æ“ä½œ | é¢„æœŸç»“æœ |
|------|------|----------|
| **é¦–æ¬¡ç™»å½•** | ç‚¹å‡»"ç™»å½•"æŒ‰é’® | æ˜¾ç¤º QR ç ï¼Œç­‰å¾…æ‰«æ |
| **QR ç æ‰«æ** | æ‰‹æœºæ‰«ç  | 2-3 ç§’å†…ç™»å½•æˆåŠŸ |
| **Session æ¢å¤** | é‡å¯åº”ç”¨ | è‡ªåŠ¨ç™»å½•ï¼Œæ— éœ€æ‰«ç  |
| **Session è¿‡æœŸ** | é•¿æ—¶é—´æœªä½¿ç”¨ | æ˜¾ç¤º"æœªç™»å½•"ï¼Œéœ€é‡æ–°æ‰«ç  |
| **å¤šè´¦å·** | åŒæ—¶ç™»å½•å¤šä¸ªè´¦å· | æ¯ä¸ªè´¦å·ç‹¬ç«‹çŠ¶æ€ |
| **ç½‘ç»œæ–­å¼€** | æ–­ç½‘åé‡è¿ | è‡ªåŠ¨é‡è¿ï¼Œæ¢å¤åœ¨çº¿çŠ¶æ€ |

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [Telegram QR Login API](https://core.telegram.org/api/qr-login)
- [Playwright Session Management](https://playwright.dev/docs/auth)
- [Telegram Web Best Practices 2025](https://blog.invitemember.com/)
- [Electron IPC Best Practices](https://www.electronjs.org/docs/latest/api/ipc-main)

---

**è®¾è®¡å®Œæˆæ—¶é—´**: 2025-11-17  
**çŠ¶æ€**: âœ… å‰ç«¯ UI å·²å®ç°ï¼Œåç«¯é›†æˆå¾…å®Œå–„  
**ä¸‹ä¸€æ­¥**: å®ç° QR ç ç”Ÿæˆå’Œæ˜¾ç¤ºåŠŸèƒ½
